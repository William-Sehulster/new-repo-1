<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:cxf="http://cxf.apache.org/core" xmlns:jaxws="http://cxf.apache.org/jaxws"
	xmlns:jaxrs="http://cxf.apache.org/jaxrs"
	xsi:schemaLocation="http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
			http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
			http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
			http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
	
	<context:component-scan base-package="gov.va.med.pharmacy.jaxrs"/>
	
	<context:annotation-config />
	
	<import resource="classpath*:persistence-context.xml"/>
	
    	
	<!-- jdbcTemplate -->
	
	<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/InboundErxDataSource"/>
	</bean>
	
	<bean id="jsonProvider" class="com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider" />
	
	<bean id="jaxbXmlProvider" class="org.apache.cxf.jaxrs.provider.JAXBElementProvider" />
	
	<import resource="classpath:META-INF/cxf/cxf.xml" />
	
	<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
	
	   <!--  bus config like logging and interceptors for inbound and outobund are applied to all the servers and clients. -->
	<cxf:bus>
		<cxf:features>
			<cxf:logging />
		</cxf:features>
	</cxf:bus>
	
  	
		
     <!--  Inbound Filtering WS used for migration -->   
	<bean id="inboundFilteringWS" class="gov.va.med.pharmacy.jaxrs.inboundncpdpmessage.migrationservice.impl.InboundMessageFilteringServiceImpl"/>	
		
	<jaxrs:server id="inboundREST" address="/rest/inbound">	
		<jaxrs:serviceBeans>
			<ref bean="inboundFilteringWS" />
		</jaxrs:serviceBeans>		 
		<jaxrs:providers>			
			<ref bean='jaxbXmlProvider' />
		</jaxrs:providers>
		 		
	</jaxrs:server>
	
	
	 <!--  outbound Filtering WS used for migration -->   
	<bean id="outboundFilteringWS" class="gov.va.med.pharmacy.jaxrs.vistaoutboundmessage.migrationservice.impl.VistaOutboundMessageFilteringServiceImpl"/>	
		
	<jaxrs:server id="inboundREST" address="/rest/outbound">	
		<jaxrs:serviceBeans>
			<ref bean="outboundFilteringWS" />
		</jaxrs:serviceBeans>		 
		<jaxrs:providers>
			<ref bean='jsonProvider' />
			<ref bean='jaxbXmlProvider' />
		</jaxrs:providers>		
		 		
	</jaxrs:server>
	

</beans>