<?xml version="1.0" encoding="UTF-8"?>
<repository>

<transformations>
<transformation>
  <info>
    <name>IBDTV_SendMessageToVistaMbM_TRN</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#x2f;inbound_vista_delivery</directory>
    <parameters>
        <parameter>
            <name>INBOUND_NCPDP_MSG_ID</name>
            <default_value/>
            <description/>
        </parameter>
        <parameter>
            <name>RETRY</name>
            <default_value/>
            <description/>
        </parameter>
        <parameter>
            <name>RUNCOUNT</name>
            <default_value/>
            <description/>
        </parameter>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field><field><id>EXECUTING_SERVER</id><enabled>N</enabled><name>EXECUTING_SERVER</name></field><field><id>EXECUTING_USER</id><enabled>N</enabled><name>EXECUTING_USER</name></field><field><id>CLIENT</id><enabled>N</enabled><name>CLIENT</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
<metrics-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>METRICS_DATE</id><enabled>Y</enabled><name>METRICS_DATE</name></field><field><id>METRICS_CODE</id><enabled>Y</enabled><name>METRICS_CODE</name></field><field><id>METRICS_DESCRIPTION</id><enabled>Y</enabled><name>METRICS_DESCRIPTION</name></field><field><id>METRICS_SUBJECT</id><enabled>Y</enabled><name>METRICS_SUBJECT</name></field><field><id>METRICS_TYPE</id><enabled>Y</enabled><name>METRICS_TYPE</name></field><field><id>METRICS_VALUE</id><enabled>Y</enabled><name>METRICS_VALUE</name></field></metrics-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
         <slaveserver><name>master1</name><hostname>localhost</hostname><port>8080</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>Y</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave3</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8083</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave5</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8085</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <created_user>admin</created_user>
  <created_date>2017&#x2f;03&#x2f;26 23&#x3a;43&#x3a;30.000</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2019&#x2f;10&#x2f;30 10&#x3a;05&#x3a;37.000</modified_date>
    <key_for_session_key/>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>local_erx</name>
    <server>&#x24;&#x7b;DB_HOST_NAME&#x7d;</server>
    <type>ORACLE</type>
    <access>Native</access>
    <database>&#x24;&#x7b;DB_NAME&#x7d;</database>
    <port>&#x24;&#x7b;DB_PORT&#x7d;</port>
    <username>&#x24;&#x7b;DB_USERNAME&#x7d;</username>
    <password>&#x24;&#x7b;DB_PASSWORD&#x7d;</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>INITIAL_POOL_SIZE</code><attribute>1</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>MAXIMUM_POOL_SIZE</code><attribute>10</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>&#x24;&#x7b;DB_PORT&#x7d;</attribute></attribute>
      <attribute><code>PRESERVE_RESERVED_WORD_CASE</code><attribute>Y</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_TIMESTAMP_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>Y</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>check for success</from><to>To Vista Check Success</to><enabled>Y</enabled> </hop>
  <hop> <from>JSON Input 2</from><to>check for retry</to><enabled>Y</enabled> </hop>
  <hop> <from>REST Client</from><to>check for retry</to><enabled>Y</enabled> </hop>
  <hop> <from>check for retry</from><to>To Vista Check Failure Allow Retry</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE to ERROR</from><to>Get Date_Time</to><enabled>Y</enabled> </hop>
  <hop> <from>Format Date-Time</from><to>Generate random value</to><enabled>Y</enabled> </hop>
  <hop> <from>Get Date_Time</from><to>Format Date-Time</to><enabled>Y</enabled> </hop>
  <hop> <from>Concat Date-Time and Random Value for New Message ID</from><to>Write to log 2</to><enabled>N</enabled> </hop>
  <hop> <from>Inject Values into NCPDP Error Message Template</from><to>Insert to OUTBOUND_NCPDP_MSG</to><enabled>Y</enabled> </hop>
  <hop> <from>JSON Input 2</from><to>Write to log</to><enabled>N</enabled> </hop>
  <hop> <from>Concat Date-Time and Random Value for New Message ID</from><to>Inject Values into NCPDP Error Message Template</to><enabled>Y</enabled> </hop>
  <hop> <from>Generate random value</from><to>ABS</to><enabled>Y</enabled> </hop>
  <hop> <from>ABS</from><to>Concat Date-Time and Random Value for New Message ID</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE_TYPE to ERROR</from><to>Set MESSAGE to ERROR</to><enabled>Y</enabled> </hop>
  <hop> <from>check for retry</from><to>To Vista Check Failure</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE to VERIFY</from><to>Get Date_Time</to><enabled>Y</enabled> </hop>
  <hop> <from>To Vista Check Success</from><to>Switch &#x2f; Case Send Verify or Not</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch &#x2f; Case Send Verify or Not</from><to>Set MESSAGE_TYPE to Verify</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch &#x2f; Case Send Verify or Not</from><to>Don&#x27;t Generate a Verify</to><enabled>Y</enabled> </hop>
  <hop> <from>JSON Input 2</from><to>Set Success values</to><enabled>Y</enabled> </hop>
  <hop> <from>Set Success values</from><to>check for success</to><enabled>Y</enabled> </hop>
  <hop> <from>To Vista Check Failure</from><to>Switch&#x2f;Case Error, Status, Verify&#x3f;</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch&#x2f;Case Error, Status, Verify&#x3f;</from><to>No Error on Error, Status, Verify</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch&#x2f;Case Error, Status, Verify&#x3f;</from><to>Set MESSAGE_TYPE to ERROR</to><enabled>Y</enabled> </hop>
  <hop> <from>check for success</from><to>remove special chars from errorMessage</to><enabled>Y</enabled> </hop>
  <hop> <from>remove special chars from errorMessage</from><to>To Vista Check Failure</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE_TYPE to Verify</from><to>Set MESSAGE to VERIFY</to><enabled>Y</enabled> </hop>
  <hop> <from>REST Client</from><to>Replace null with &#x22;</to><enabled>Y</enabled> </hop>
  <hop> <from>Replace null with &#x22;</from><to>JSON Input 2</to><enabled>Y</enabled> </hop>
  <hop> <from>Table input</from><to>Set Message Status to Processing</to><enabled>Y</enabled> </hop>
  <hop> <from>Set Message Status to Processing</from><to>REST Client</to><enabled>Y</enabled> </hop>
  </order>
  <step>
    <name>ABS</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>MESSAGE_ID3</field_name>
<calc_type>ABS</calc_type>
<field_a>MESSAGE_ID2</field_a>
<field_b/>
<field_c/>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask>0</conversion_mask>
<decimal_symbol>.</decimal_symbol>
<grouping_symbol>,</grouping_symbol>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1328</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Concat Date-Time and Random Value for New Message ID</name>
    <type>ConcatFields</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <separator>.0</separator>
    <enclosure/>
    <enclosure_forced>N</enclosure_forced>
    <enclosure_fix_disabled>N</enclosure_fix_disabled>
    <header>N</header>
    <footer>N</footer>
    <format>DOS</format>
    <compression>None</compression>
    <encoding/>
    <endedLine/>
    <fileNameInField>N</fileNameInField>
    <fileNameField/>
    <create_parent_folder>Y</create_parent_folder>
    <file>
      <name>file</name>
      <is_command>N</is_command>
      <servlet_output>N</servlet_output>
      <do_not_open_new_file_init>N</do_not_open_new_file_init>
      <extention>txt</extention>
      <append>N</append>
      <split>N</split>
      <haspartno>N</haspartno>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <add_to_result_filenames>Y</add_to_result_filenames>
      <pad>N</pad>
      <fast_dump>N</fast_dump>
      <splitevery>0</splitevery>
    </file>
    <fields>
      <field>
        <name>MESSAGE_ID_DATETIME</name>
        <type>None</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>MESSAGE_ID3</name>
        <type>None</type>
        <format>0000000000</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
    <ConcatFields>
<targetFieldName>MESSAGE_ID_NEW_1</targetFieldName>
<targetFieldLength>35</targetFieldLength>
<removeSelectedFields>N</removeSelectedFields>
    </ConcatFields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1056</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Don&#x27;t Generate a Verify</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>944</xloc>
      <yloc>176</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Format Date-Time</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#xa;var d &#x3d; new Date&#x28;&#x29;&#x3b;&#xa;&#xa;var output &#x3d; date2str&#x28;TODAY_DATE_TIME, &#x22;MMddyyyy.HH.mm.sss&#x22;&#x29;&#x3b;&#xa;&#xa;var output2 &#x3d; d.toISOString&#x28;&#x29;&#x3b;&#xa;&#xa;</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>output</name>
        <rename>MESSAGE_ID_DATETIME</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>output2</name>
        <rename>MESSAGE_SENT_DATETIME2</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1168</xloc>
      <yloc>608</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Generate random value</name>
    <type>RandomValue</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>MESSAGE_ID2</name>
        <type>random integer</type>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1328</xloc>
      <yloc>608</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Get Date_Time</name>
    <type>SystemInfo</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>TODAY_DATE_TIME</name>
        <type>system date &#x28;variable&#x29;</type>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>976</xloc>
      <yloc>528</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Inject Values into NCPDP Error Message Template</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_to&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>CLINIC_ID</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_from&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>PHARMACY_NCPDPID</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_message_id&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>MESSAGE_ID_NEW_1</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_relates_to_message_id&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>MESSAGE_ID</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_sent_time&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>MESSAGE_SENT_DATETIME2</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_error_code&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>ERROR_CODE</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_description_code&#x7d;</replace_string>
        <replace_by_string>007</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_description&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>ERROR_DESC</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>688</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Insert to OUTBOUND_NCPDP_MSG</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>N</replace_variables>
    <quoteString>N</quoteString>
    <sql>insert into outbound_ncpdp_msg &#x28;message_id,rel_to_message_id,  message, message_type, message_status, pharmacy_id,received_date&#x29;&#xa;values &#x28;&#x27;&#x3f;&#x27;,&#x27;&#x3f;&#x27;,&#x27;&#x3f;&#x27;,&#x27;&#x3f;&#x27;,&#x27;0000&#x27;,&#x27;&#x3f;&#x27;, SYSDATE&#x29;&#x3b;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>MESSAGE_ID_NEW_1</name></argument>
       <argument><name>MESSAGE_ID</name></argument>
       <argument><name>MESSAGE</name></argument>
       <argument><name>MESSAGE_TYPE</name></argument>
       <argument><name>PHARMACY_ID</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>384</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>JSON Input 2</name>
    <type>JsonInput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <readurl>N</readurl>
    <removeSourceField>N</removeSourceField>
    <IsIgnoreEmptyFile>Y</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>Y</doNotFailIfNoFile>
    <ignoreMissingPath>N</ignoreMissingPath>
    <defaultPathLeafToNull>Y</defaultPathLeafToNull>
    <rownum_field/>
    <file>
      <name/>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>success</name>
        <path>success</path>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>errorMessage</name>
        <path>errorMessage</path>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>vistaMessage</name>
        <path>vistaMessage</path>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <valueField>rest_result</valueField>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>368</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>No Error on Error, Status, Verify</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1024</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>REST Client</name>
    <type>Rest</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <applicationType>JSON</applicationType>
    <method>POST</method>
    <url/>
    <urlInField>Y</urlInField>
    <dynamicMethod>N</dynamicMethod>
    <methodFieldName/>
    <urlField>URL</urlField>
    <bodyField>BODY</bodyField>
    <httpLogin>&#x24;&#x7b;WS_USERNAME&#x7d;</httpLogin>
    <httpPassword>&#x24;&#x7b;WS_PASSWORD&#x7d;</httpPassword>
    <proxyHost/>
    <proxyPort/>
    <preemptive>Y</preemptive>
    <trustStoreFile/>
    <trustStorePassword>Encrypted </trustStorePassword>
    <headers>
      </headers>
    <parameters>
      </parameters>
    <matrixParameters>
      </matrixParameters>
    <result>
      <name>rest_result</name>
      <code/>
      <response_time/>
      </result>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>128</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Replace null with &#x22;</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>rest_result</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x3a;null</replace_string>
        <replace_by_string>&#x3a;&#x22;&#x22;</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>240</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE to ERROR</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE</name>
        <value>&#x3c;&#x3f;xml version&#x3d;&#x22;1.0&#x22; encoding&#x3d;&#x22;UTF-8&#x22;&#x3f;&#x3e;&#x3c;Message version&#x3d;&#x22;010&#x22; release&#x3d;&#x22;006&#x22; xmlns&#x3d;&#x22;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x22;&#x3e;&#x3c;Header&#x3e;&#x3c;To Qualifier&#x3d;&#x22;D&#x22;&#x3e;&#x7b;set_to&#x7d;&#x3c;&#x2f;To&#x3e;&#x3c;From Qualifier&#x3d;&#x22;P&#x22;&#x3e;&#x7b;set_from&#x7d;&#x3c;&#x2f;From&#x3e;&#x3c;MessageID&#x3e;&#x7b;set_message_id&#x7d;&#x3c;&#x2f;MessageID&#x3e;&#x3c;RelatesToMessageID&#x3e;&#x7b;set_relates_to_message_id&#x7d;&#x3c;&#x2f;RelatesToMessageID&#x3e;&#x3c;SentTime&#x3e;&#x7b;set_sent_time&#x7d;&#x3c;&#x2f;SentTime&#x3e;&#x3c;&#x2f;Header&#x3e;&#x3c;Body&#x3e;&#x3c;Error&#x3e;&#x3c;Code&#x3e;600&#x3c;&#x2f;Code&#x3e;&#x3c;DescriptionCode&#x3e;001&#x3c;&#x2f;DescriptionCode&#x3e;&#x3c;Description&#x2f;&#x3e;&#x3c;&#x2f;Error&#x3e;&#x3c;&#x2f;Body&#x3e;&#x3c;&#x2f;Message&#x3e;</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>800</xloc>
      <yloc>528</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE to VERIFY</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE</name>
        <value>&#x3c;&#x3f;xml version&#x3d;&#x22;1.0&#x22;&#x3f;&#x3e;&#x3c;Message version&#x3d;&#x22;010&#x22; release&#x3d;&#x22;006&#x22; xmlns&#x3d;&#x22;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x22;&#x3e;&#x3c;Header&#x3e;&#x3c;To Qualifier&#x3d;&#x22;D&#x22;&#x3e;&#x7b;set_to&#x7d;&#x3c;&#x2f;To&#x3e;&#x3c;From Qualifier&#x3d;&#x22;P&#x22;&#x3e;&#x7b;set_from&#x7d;&#x3c;&#x2f;From&#x3e;&#x3c;MessageID&#x3e;&#x7b;set_message_id&#x7d;&#x3c;&#x2f;MessageID&#x3e;&#x3c;RelatesToMessageID&#x3e;&#x7b;set_relates_to_message_id&#x7d;&#x3c;&#x2f;RelatesToMessageID&#x3e;&#x3c;SentTime&#x3e;&#x7b;set_sent_time&#x7d;&#x3c;&#x2f;SentTime&#x3e;&#x3c;&#x2f;Header&#x3e;&#x3c;Body&#x3e;&#x3c;Verify&#x3e;&#x3c;VerifyStatus&#x3e;&#x3c;Code&#x3e;010&#x3c;&#x2f;Code&#x3e;&#x3c;Description&#x3e;Received By Pharmacy.&#x3c;&#x2f;Description&#x3e;&#x3c;&#x2f;VerifyStatus&#x3e;&#x3c;&#x2f;Verify&#x3e;&#x3c;&#x2f;Body&#x3e;&#x3c;&#x2f;Message&#x3e;</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1168</xloc>
      <yloc>528</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE_TYPE to ERROR</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE_TYPE</name>
        <value>Error</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>800</xloc>
      <yloc>416</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE_TYPE to Verify</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE_TYPE</name>
        <value>Verify</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1168</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set Message Status to Processing</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg set message_status &#x3d; &#x27;3003&#x27; where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xd;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
       <argument><name>success</name></argument>
       <argument><name>vistaMessage</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>128</xloc>
      <yloc>208</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set Success values</name>
    <type>SetValueField</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>VISTAMESSAGE</name>
        <replaceby>vistaMessage_1</replaceby>
        </field>
      <field>
        <name>SUCCESS</name>
        <replaceby>success_1</replaceby>
        </field>
      <field>
        <name>ERRORMESSAGE</name>
        <replaceby>errorMessage_1</replaceby>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>480</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Switch &#x2f; Case Send Verify or Not</name>
    <type>SwitchCase</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<fieldname>MESSAGE_TYPE</fieldname>
<use_contains>N</use_contains>
<case_value_type>String</case_value_type>
<case_value_format/>
<case_value_decimal/>
<case_value_group/>
<default_target_step>Set MESSAGE_TYPE to Verify</default_target_step>
<cases><case><value>Error</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case><case><value>Verify</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case><case><value>Status</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case><case><value>NewRx</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case></cases>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>944</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Switch&#x2f;Case Error, Status, Verify&#x3f;</name>
    <type>SwitchCase</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<fieldname>MESSAGE_TYPE</fieldname>
<use_contains>N</use_contains>
<case_value_type>String</case_value_type>
<case_value_format/>
<case_value_decimal/>
<case_value_group/>
<default_target_step>Set MESSAGE_TYPE to ERROR</default_target_step>
<cases><case><value>Error</value>
<target_step>No Error on Error, Status, Verify</target_step>
</case><case><value>Verify</value>
<target_step>No Error on Error, Status, Verify</target_step>
</case><case><value>Status</value>
<target_step>No Error on Error, Status, Verify</target_step>
</case></cases>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>800</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Table input</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <sql>select &#x28;select value from app_configuration where key &#x3d; &#x27;ERX_URL&#x27;&#x29;&#x7c;&#x7c;&#xa;&#x28;select value from app_configuration where key &#x3d; &#x27;TO_VISTA_RS_URI&#x27;&#x29;as url,&#xa;&#x27;&#x7b;&#x22;xmlInboundMessageId&#x22;&#x3a;&#x22;&#x27;&#x7c;&#x7c;t.inbound_ncpdp_msg_id&#x7c;&#x7c;&#x27;&#x22;,&#x22;division&#x22;&#x3a;&#x22;&#x27;&#x7c;&#x7c;&#xa;&#x28;select substr&#x28;va_station_id,1,3&#x29; from pharmacy where t.pharmacy_id &#x3d; pharmacy_id&#x29;&#x7c;&#x7c;&#x27;&#x22;&#x7d;&#x27; as body,&#xa;&#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;vistaSends&#x3e;&#x3c;&#x2f;vistaSends&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;vistaSends&#x27;&#x29;, 0&#x29;&#x29; &#x2b; 1 as runCount,&#xa;nvl&#x28;&#x28;select value from app_configuration where key &#x3d; &#x27;VISTA_RETRY&#x27;&#x29;,0&#x29; as retry,&#xa;t.inbound_ncpdp_msg_id inbound_ncpdp_msg_id,&#xa;t.message_from provider_npi,&#xa;&#x28;select ncpdp_id from pharmacy where t.pharmacy_id &#x3d; pharmacy_id&#x29; as pharmacy_ncpdpid,&#xa;t.message_id as message_id,&#xa;t.pharmacy_id as pharmacy_id,&#xa;t.message_type as message_type,&#xa;&#x27;UNK&#x27; as message,&#xa;&#x27;UNK&#x27; as message_id_new_1,&#xa;&#x27;UNK&#x27; as message_sent_datetime,&#xa;&#x27;UNK&#x27; as error_code,&#xa;&#x27;UNK&#x27; as error_desc,&#xa;&#x27;UNK&#x27; as message_id_new2,&#xa;&#x27;&#x27; as success,&#xa;&#x27;&#x27; as vistaMessage,&#xa;&#x27;&#x27; as errorMessage,&#xa;clinic_id,&#xa;&#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;cancelRxDenied&#x3e;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;cancelRxDenied&#x27;&#x29;, null&#x29;&#x29; as cancelRxDenied,&#xa;&#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;relToOutboundNcpdpMsgId&#x27;&#x29;, null&#x29;&#x29; as relToOutboundNcpdpMsgId&#xa;from inbound_ncpdp_msg t, xmltable&#x28;xmlnamespaces&#x28;&#x27;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x27; as &#x22;ns&#x22;&#x29;, &#x27;&#x2f;ns&#x3a;Message&#x27;&#xa;    passing t.message&#xa;    columns&#xa;    clinic_id varchar2&#x28;35&#x29; path &#x27;&#x2f;&#x2f;ns&#x3a;Header&#x2f;ns&#x3a;From&#x27;&#x29; x&#xa;    where t.inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;</sql>
    <limit>1</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>32</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>To Vista Check Failure</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg &#xa;set message_status &#x3d; &#x27;3005&#x27;, message_status_details &#x3d; &#x27;&#x3c;messageStatusDetails&#x3e;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3f;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x3c;cancelRxDenied&#x3e;&#x3f;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x3c;vistaSends&#x3e;&#x3f;&#x3c;&#x2f;vistaSends&#x3e;&#x3c;vistaMessage&#x3e;&#x27;&#x7c;&#x7c;substr&#x28;&#x27;&#x3f;&#x27;,1,1500&#x29;&#x7c;&#x7c;&#x27;&#x3c;&#x2f;vistaMessage&#x3e;&#x3c;hubMessage&#x3e;&#x27;&#x7c;&#x7c;substr&#x28;&#x27;&#x3c;&#x21;&#x5b;CDATA&#x5b; &#x3f; &#x5d;&#x5d;&#x3e;&#x27;,1,1500&#x29;&#x7c;&#x7c;&#x27;&#x3c;&#x2f;hubMessage&#x3e;&#x3c;&#x2f;messageStatusDetails&#x3e;&#x27;&#xa;where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xa;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
       <argument><name>VISTAMESSAGE</name></argument>
       <argument><name>ERRORMESSAGE</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>To Vista Check Failure Allow Retry</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg set message_status &#x3d; &#x27;3004&#x27;, message_status_details &#x3d; &#x27;&#x3c;messageStatusDetails&#x3e;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3f;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x3c;cancelRxDenied&#x3e;&#x3f;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x3c;vistaSends&#x3e;&#x3f;&#x3c;&#x2f;vistaSends&#x3e;&#x3c;&#x2f;messageStatusDetails&#x3e;&#x27;&#xa;where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>160</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>To Vista Check Success</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg &#xa;set message_status &#x3d; &#x27;3002&#x27;, message_status_details &#x3d; &#x27;&#x3c;messageStatusDetails&#x3e;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3f;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x3c;cancelRxDenied&#x3e;&#x3f;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x3c;vistaSends&#x3e;&#x3f;&#x3c;&#x2f;vistaSends&#x3e;&#x3c;vistaMessage&#x3e;&#x27;&#x7c;&#x7c;substr&#x28;&#x27;&#x3f; - &#x3f;&#x27;,1,1500&#x29;&#x7c;&#x7c;&#x27;&#x3c;&#x2f;vistaMessage&#x3e;&#x3c;&#x2f;messageStatusDetails&#x3e;&#x27;&#xa;where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xa;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
       <argument><name>success</name></argument>
       <argument><name>vistaMessage</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>752</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Write to log</name>
    <type>WriteToLog</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <loglevel>log_level_rowlevel</loglevel>
      <displayHeader>Y</displayHeader>
      <limitRows>N</limitRows>
      <limitRowsNumber>0</limitRowsNumber>
      <logmessage/>
    <fields>
      <field>
        <name>errorMessage</name>
        </field>
      <field>
        <name>rest_result</name>
        </field>
      <field>
        <name>vistaMessage</name>
        </field>
      <field>
        <name>success</name>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>432</xloc>
      <yloc>144</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Write to log 2</name>
    <type>WriteToLog</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <loglevel>log_level_basic</loglevel>
      <displayHeader>Y</displayHeader>
      <limitRows>N</limitRows>
      <limitRowsNumber>0</limitRowsNumber>
      <logmessage>LOG&#x21;&#x21;&#x21;&#x21;&#x21;</logmessage>
    <fields>
      <field>
        <name>MESSAGE_ID</name>
        </field>
      <field>
        <name>MESSAGE_SENT_DATETIME</name>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1056</xloc>
      <yloc>800</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>check for retry</name>
    <type>FilterRows</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>To Vista Check Failure</send_true_to>
<send_false_to>To Vista Check Failure Allow Retry</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>RUNCOUNT</leftvalue>
 <function>&#x3e;&#x3d;</function>
 <rightvalue>RETRY</rightvalue>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>368</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>check for success</name>
    <type>FilterRows</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>To Vista Check Success</send_true_to>
<send_false_to>remove special chars from errorMessage</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>success</leftvalue>
   <function>&#x3d;</function>
   <rightvalue/>
   <value><name>constant</name><type>String</type><text>true</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <conditions>
    <condition>
     <negated>N</negated>
     <leftvalue>VISTAMESSAGE</leftvalue>
     <function>&#x3d;</function>
     <rightvalue/>
     <value><name>constant</name><type>String</type><text>This message already exists. Changes must occur via a change request XML message.</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>     </condition>
    <condition>
     <negated>N</negated>
     <operator>AND</operator>
     <leftvalue>RUNCOUNT</leftvalue>
     <function>&#x3e;</function>
     <rightvalue/>
     <value><name>constant</name><type>BigNumber</type><text>1</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>&#x23;.&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x3b;-&#x23;.&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;</mask></value>     </condition>
    </conditions>
   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>remove special chars from errorMessage</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>ERRORMESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>yes</use_regex>
        <replace_string>&#x5c;p&#x7b;Punct&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
      <error>
        <source_step>JSON Input 2</source_step>
        <target_step>check for retry</target_step>
        <is_enabled>Y</is_enabled>
        <nr_valuename/>
        <descriptions_valuename/>
        <fields_valuename/>
        <codes_valuename/>
        <max_errors/>
        <max_pct_errors/>
        <min_pct_rows/>
      </error>
      <error>
        <source_step>REST Client</source_step>
        <target_step>check for retry</target_step>
        <is_enabled>Y</is_enabled>
        <nr_valuename/>
        <descriptions_valuename/>
        <fields_valuename/>
        <codes_valuename/>
        <max_errors/>
        <max_pct_errors/>
        <min_pct_rows/>
      </error>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>

</transformation>

<transformation>
  <info>
    <name>IBDTV_SendMessageToVista_TRN</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#x2f;inbound_vista_delivery</directory>
    <parameters>
        <parameter>
            <name>INBOUND_NCPDP_MSG_ID</name>
            <default_value/>
            <description/>
        </parameter>
        <parameter>
            <name>RETRY</name>
            <default_value/>
            <description/>
        </parameter>
        <parameter>
            <name>RUNCOUNT</name>
            <default_value/>
            <description/>
        </parameter>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field><field><id>EXECUTING_SERVER</id><enabled>N</enabled><name>EXECUTING_SERVER</name></field><field><id>EXECUTING_USER</id><enabled>N</enabled><name>EXECUTING_USER</name></field><field><id>CLIENT</id><enabled>N</enabled><name>CLIENT</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
<metrics-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>METRICS_DATE</id><enabled>Y</enabled><name>METRICS_DATE</name></field><field><id>METRICS_CODE</id><enabled>Y</enabled><name>METRICS_CODE</name></field><field><id>METRICS_DESCRIPTION</id><enabled>Y</enabled><name>METRICS_DESCRIPTION</name></field><field><id>METRICS_SUBJECT</id><enabled>Y</enabled><name>METRICS_SUBJECT</name></field><field><id>METRICS_TYPE</id><enabled>Y</enabled><name>METRICS_TYPE</name></field><field><id>METRICS_VALUE</id><enabled>Y</enabled><name>METRICS_VALUE</name></field></metrics-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
         <slaveserver><name>master1</name><hostname>localhost</hostname><port>8080</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>Y</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave3</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8083</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave5</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8085</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <created_user>admin</created_user>
  <created_date>2017&#x2f;03&#x2f;26 23&#x3a;43&#x3a;30.000</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2019&#x2f;10&#x2f;30 10&#x3a;05&#x3a;03.000</modified_date>
    <key_for_session_key/>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>local_erx</name>
    <server>&#x24;&#x7b;DB_HOST_NAME&#x7d;</server>
    <type>ORACLE</type>
    <access>Native</access>
    <database>&#x24;&#x7b;DB_NAME&#x7d;</database>
    <port>&#x24;&#x7b;DB_PORT&#x7d;</port>
    <username>&#x24;&#x7b;DB_USERNAME&#x7d;</username>
    <password>&#x24;&#x7b;DB_PASSWORD&#x7d;</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>INITIAL_POOL_SIZE</code><attribute>1</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>MAXIMUM_POOL_SIZE</code><attribute>10</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>&#x24;&#x7b;DB_PORT&#x7d;</attribute></attribute>
      <attribute><code>PRESERVE_RESERVED_WORD_CASE</code><attribute>Y</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_TIMESTAMP_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>Y</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>JSON Input 2</from><to>check for retry</to><enabled>Y</enabled> </hop>
  <hop> <from>REST Client</from><to>check for retry</to><enabled>Y</enabled> </hop>
  <hop> <from>check for retry</from><to>To Vista Check Failure Allow Retry</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE to ERROR</from><to>Get Date_Time</to><enabled>Y</enabled> </hop>
  <hop> <from>Format Date-Time</from><to>Generate random value</to><enabled>Y</enabled> </hop>
  <hop> <from>Get Date_Time</from><to>Format Date-Time</to><enabled>Y</enabled> </hop>
  <hop> <from>Concat Date-Time and Random Value for New Message ID</from><to>Write to log 2</to><enabled>N</enabled> </hop>
  <hop> <from>Inject Values into NCPDP Error Message Template</from><to>Insert to OUTBOUND_NCPDP_MSG</to><enabled>Y</enabled> </hop>
  <hop> <from>JSON Input 2</from><to>Write to log</to><enabled>N</enabled> </hop>
  <hop> <from>Concat Date-Time and Random Value for New Message ID</from><to>Inject Values into NCPDP Error Message Template</to><enabled>Y</enabled> </hop>
  <hop> <from>Generate random value</from><to>ABS</to><enabled>Y</enabled> </hop>
  <hop> <from>ABS</from><to>Concat Date-Time and Random Value for New Message ID</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE_TYPE to ERROR</from><to>Set MESSAGE to ERROR</to><enabled>Y</enabled> </hop>
  <hop> <from>check for retry</from><to>To Vista Check Failure</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE to VERIFY</from><to>Get Date_Time</to><enabled>Y</enabled> </hop>
  <hop> <from>To Vista Check Success</from><to>Switch &#x2f; Case Send Verify or Not</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch &#x2f; Case Send Verify or Not</from><to>Set MESSAGE_TYPE to Verify</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch &#x2f; Case Send Verify or Not</from><to>Don&#x27;t Generate a Verify</to><enabled>Y</enabled> </hop>
  <hop> <from>JSON Input 2</from><to>Set Success values</to><enabled>Y</enabled> </hop>
  <hop> <from>Set Success values</from><to>check for success</to><enabled>Y</enabled> </hop>
  <hop> <from>To Vista Check Failure</from><to>Switch&#x2f;Case Error, Status, Verify&#x3f;</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch&#x2f;Case Error, Status, Verify&#x3f;</from><to>No Error on Error, Status, Verify</to><enabled>Y</enabled> </hop>
  <hop> <from>Switch&#x2f;Case Error, Status, Verify&#x3f;</from><to>Set MESSAGE_TYPE to ERROR</to><enabled>Y</enabled> </hop>
  <hop> <from>check for success</from><to>remove special chars from errorMessage</to><enabled>Y</enabled> </hop>
  <hop> <from>remove special chars from errorMessage</from><to>To Vista Check Failure</to><enabled>Y</enabled> </hop>
  <hop> <from>Set MESSAGE_TYPE to Verify</from><to>Set MESSAGE to VERIFY</to><enabled>Y</enabled> </hop>
  <hop> <from>REST Client</from><to>Replace null with &#x22;</to><enabled>Y</enabled> </hop>
  <hop> <from>Replace null with &#x22;</from><to>JSON Input 2</to><enabled>Y</enabled> </hop>
  <hop> <from>Table input</from><to>Set Message Status to Processing</to><enabled>Y</enabled> </hop>
  <hop> <from>Set Message Status to Processing</from><to>REST Client</to><enabled>Y</enabled> </hop>
  <hop> <from>check for success</from><to>To Vista Check Success</to><enabled>Y</enabled> </hop>
  </order>
  <step>
    <name>ABS</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>MESSAGE_ID3</field_name>
<calc_type>ABS</calc_type>
<field_a>MESSAGE_ID2</field_a>
<field_b/>
<field_c/>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask>0</conversion_mask>
<decimal_symbol>.</decimal_symbol>
<grouping_symbol>,</grouping_symbol>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1328</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Concat Date-Time and Random Value for New Message ID</name>
    <type>ConcatFields</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <separator>.0</separator>
    <enclosure/>
    <enclosure_forced>N</enclosure_forced>
    <enclosure_fix_disabled>N</enclosure_fix_disabled>
    <header>N</header>
    <footer>N</footer>
    <format>DOS</format>
    <compression>None</compression>
    <encoding/>
    <endedLine/>
    <fileNameInField>N</fileNameInField>
    <fileNameField/>
    <create_parent_folder>Y</create_parent_folder>
    <file>
      <name>file</name>
      <is_command>N</is_command>
      <servlet_output>N</servlet_output>
      <do_not_open_new_file_init>N</do_not_open_new_file_init>
      <extention>txt</extention>
      <append>N</append>
      <split>N</split>
      <haspartno>N</haspartno>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <add_to_result_filenames>Y</add_to_result_filenames>
      <pad>N</pad>
      <fast_dump>N</fast_dump>
      <splitevery>0</splitevery>
    </file>
    <fields>
      <field>
        <name>MESSAGE_ID_DATETIME</name>
        <type>None</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>MESSAGE_ID3</name>
        <type>None</type>
        <format>0000000000</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
    <ConcatFields>
<targetFieldName>MESSAGE_ID_NEW_1</targetFieldName>
<targetFieldLength>35</targetFieldLength>
<removeSelectedFields>N</removeSelectedFields>
    </ConcatFields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1056</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Don&#x27;t Generate a Verify</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>944</xloc>
      <yloc>176</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Format Date-Time</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#xa;var d &#x3d; new Date&#x28;&#x29;&#x3b;&#xa;&#xa;var output &#x3d; date2str&#x28;TODAY_DATE_TIME, &#x22;MMddyyyy.HH.mm.sss&#x22;&#x29;&#x3b;&#xa;&#xa;var output2 &#x3d; d.toISOString&#x28;&#x29;&#x3b;&#xa;&#xa;</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>output</name>
        <rename>MESSAGE_ID_DATETIME</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>output2</name>
        <rename>MESSAGE_SENT_DATETIME2</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1168</xloc>
      <yloc>608</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Generate random value</name>
    <type>RandomValue</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>MESSAGE_ID2</name>
        <type>random integer</type>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1328</xloc>
      <yloc>608</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Get Date_Time</name>
    <type>SystemInfo</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>TODAY_DATE_TIME</name>
        <type>system date &#x28;variable&#x29;</type>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>976</xloc>
      <yloc>528</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Inject Values into NCPDP Error Message Template</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_to&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>CLINIC_ID</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_from&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>PHARMACY_NCPDPID</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_message_id&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>MESSAGE_ID_NEW_1</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_relates_to_message_id&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>MESSAGE_ID</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_sent_time&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>MESSAGE_SENT_DATETIME2</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_error_code&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>ERROR_CODE</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_description_code&#x7d;</replace_string>
        <replace_by_string>007</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
      <field>
        <in_stream_name>MESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x7b;set_description&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string>ERROR_DESC</replace_field_by_string>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>688</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Insert to OUTBOUND_NCPDP_MSG</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>N</replace_variables>
    <quoteString>N</quoteString>
    <sql>insert into outbound_ncpdp_msg &#x28;message_id,rel_to_message_id,  message, message_type, message_status, pharmacy_id,received_date&#x29;&#xa;values &#x28;&#x27;&#x3f;&#x27;,&#x27;&#x3f;&#x27;,&#x27;&#x3f;&#x27;,&#x27;&#x3f;&#x27;,&#x27;0000&#x27;,&#x27;&#x3f;&#x27;, SYSDATE&#x29;&#x3b;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>MESSAGE_ID_NEW_1</name></argument>
       <argument><name>MESSAGE_ID</name></argument>
       <argument><name>MESSAGE</name></argument>
       <argument><name>MESSAGE_TYPE</name></argument>
       <argument><name>PHARMACY_ID</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>384</xloc>
      <yloc>704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>JSON Input 2</name>
    <type>JsonInput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <addresultfile>N</addresultfile>
    <readurl>N</readurl>
    <removeSourceField>N</removeSourceField>
    <IsIgnoreEmptyFile>Y</IsIgnoreEmptyFile>
    <doNotFailIfNoFile>Y</doNotFailIfNoFile>
    <ignoreMissingPath>N</ignoreMissingPath>
    <defaultPathLeafToNull>Y</defaultPathLeafToNull>
    <rownum_field/>
    <file>
      <name/>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
    </file>
    <fields>
      <field>
        <name>success</name>
        <path>success</path>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>errorMessage</name>
        <path>errorMessage</path>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>vistaMessage</name>
        <path>vistaMessage</path>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <IsInFields>Y</IsInFields>
    <IsAFile>N</IsAFile>
    <valueField>rest_result</valueField>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>368</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>No Error on Error, Status, Verify</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1024</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>REST Client</name>
    <type>Rest</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <applicationType>JSON</applicationType>
    <method>POST</method>
    <url/>
    <urlInField>Y</urlInField>
    <dynamicMethod>N</dynamicMethod>
    <methodFieldName/>
    <urlField>URL</urlField>
    <bodyField>BODY</bodyField>
    <httpLogin>&#x24;&#x7b;WS_USERNAME&#x7d;</httpLogin>
    <httpPassword>&#x24;&#x7b;WS_PASSWORD&#x7d;</httpPassword>
    <proxyHost/>
    <proxyPort/>
    <preemptive>Y</preemptive>
    <trustStoreFile/>
    <trustStorePassword>Encrypted </trustStorePassword>
    <headers>
      </headers>
    <parameters>
      </parameters>
    <matrixParameters>
      </matrixParameters>
    <result>
      <name>rest_result</name>
      <code/>
      <response_time/>
      </result>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>128</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Replace null with &#x22;</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>rest_result</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#x3a;null</replace_string>
        <replace_by_string>&#x3a;&#x22;&#x22;</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>240</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE to ERROR</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE</name>
        <value>&#x3c;&#x3f;xml version&#x3d;&#x22;1.0&#x22; encoding&#x3d;&#x22;UTF-8&#x22;&#x3f;&#x3e;&#x3c;Message version&#x3d;&#x22;010&#x22; release&#x3d;&#x22;006&#x22; xmlns&#x3d;&#x22;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x22;&#x3e;&#x3c;Header&#x3e;&#x3c;To Qualifier&#x3d;&#x22;D&#x22;&#x3e;&#x7b;set_to&#x7d;&#x3c;&#x2f;To&#x3e;&#x3c;From Qualifier&#x3d;&#x22;P&#x22;&#x3e;&#x7b;set_from&#x7d;&#x3c;&#x2f;From&#x3e;&#x3c;MessageID&#x3e;&#x7b;set_message_id&#x7d;&#x3c;&#x2f;MessageID&#x3e;&#x3c;RelatesToMessageID&#x3e;&#x7b;set_relates_to_message_id&#x7d;&#x3c;&#x2f;RelatesToMessageID&#x3e;&#x3c;SentTime&#x3e;&#x7b;set_sent_time&#x7d;&#x3c;&#x2f;SentTime&#x3e;&#x3c;&#x2f;Header&#x3e;&#x3c;Body&#x3e;&#x3c;Error&#x3e;&#x3c;Code&#x3e;600&#x3c;&#x2f;Code&#x3e;&#x3c;DescriptionCode&#x3e;001&#x3c;&#x2f;DescriptionCode&#x3e;&#x3c;Description&#x2f;&#x3e;&#x3c;&#x2f;Error&#x3e;&#x3c;&#x2f;Body&#x3e;&#x3c;&#x2f;Message&#x3e;</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>800</xloc>
      <yloc>528</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE to VERIFY</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE</name>
        <value>&#x3c;&#x3f;xml version&#x3d;&#x22;1.0&#x22;&#x3f;&#x3e;&#x3c;Message version&#x3d;&#x22;010&#x22; release&#x3d;&#x22;006&#x22; xmlns&#x3d;&#x22;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x22;&#x3e;&#x3c;Header&#x3e;&#x3c;To Qualifier&#x3d;&#x22;D&#x22;&#x3e;&#x7b;set_to&#x7d;&#x3c;&#x2f;To&#x3e;&#x3c;From Qualifier&#x3d;&#x22;P&#x22;&#x3e;&#x7b;set_from&#x7d;&#x3c;&#x2f;From&#x3e;&#x3c;MessageID&#x3e;&#x7b;set_message_id&#x7d;&#x3c;&#x2f;MessageID&#x3e;&#x3c;RelatesToMessageID&#x3e;&#x7b;set_relates_to_message_id&#x7d;&#x3c;&#x2f;RelatesToMessageID&#x3e;&#x3c;SentTime&#x3e;&#x7b;set_sent_time&#x7d;&#x3c;&#x2f;SentTime&#x3e;&#x3c;&#x2f;Header&#x3e;&#x3c;Body&#x3e;&#x3c;Verify&#x3e;&#x3c;VerifyStatus&#x3e;&#x3c;Code&#x3e;010&#x3c;&#x2f;Code&#x3e;&#x3c;Description&#x3e;Received By Pharmacy.&#x3c;&#x2f;Description&#x3e;&#x3c;&#x2f;VerifyStatus&#x3e;&#x3c;&#x2f;Verify&#x3e;&#x3c;&#x2f;Body&#x3e;&#x3c;&#x2f;Message&#x3e;</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1168</xloc>
      <yloc>528</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE_TYPE to ERROR</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE_TYPE</name>
        <value>Error</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>800</xloc>
      <yloc>416</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set MESSAGE_TYPE to Verify</name>
    <type>SetValueConstant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <usevar>N</usevar>
    <fields>
      <field>
        <name>MESSAGE_TYPE</name>
        <value>Verify</value>
        <mask/>
        <set_empty_string>N</set_empty_string>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1168</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set Message Status to Processing</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg set message_status &#x3d; &#x27;3003&#x27; where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xd;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
       <argument><name>success</name></argument>
       <argument><name>vistaMessage</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>112</xloc>
      <yloc>208</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Set Success values</name>
    <type>SetValueField</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>VISTAMESSAGE</name>
        <replaceby>vistaMessage_1</replaceby>
        </field>
      <field>
        <name>SUCCESS</name>
        <replaceby>success_1</replaceby>
        </field>
      <field>
        <name>ERRORMESSAGE</name>
        <replaceby>errorMessage_1</replaceby>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>480</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Switch &#x2f; Case Send Verify or Not</name>
    <type>SwitchCase</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<fieldname>MESSAGE_TYPE</fieldname>
<use_contains>N</use_contains>
<case_value_type>String</case_value_type>
<case_value_format/>
<case_value_decimal/>
<case_value_group/>
<default_target_step>Set MESSAGE_TYPE to Verify</default_target_step>
<cases><case><value>Error</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case><case><value>Verify</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case><case><value>Status</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case><case><value>NewRx</value>
<target_step>Don&#x27;t Generate a Verify</target_step>
</case></cases>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>944</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Switch&#x2f;Case Error, Status, Verify&#x3f;</name>
    <type>SwitchCase</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<fieldname>MESSAGE_TYPE</fieldname>
<use_contains>N</use_contains>
<case_value_type>String</case_value_type>
<case_value_format/>
<case_value_decimal/>
<case_value_group/>
<default_target_step>Set MESSAGE_TYPE to ERROR</default_target_step>
<cases><case><value>Error</value>
<target_step>No Error on Error, Status, Verify</target_step>
</case><case><value>Verify</value>
<target_step>No Error on Error, Status, Verify</target_step>
</case><case><value>Status</value>
<target_step>No Error on Error, Status, Verify</target_step>
</case></cases>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>800</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Table input</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <sql>select &#x28;select value from app_configuration where key &#x3d; &#x27;ERX_URL&#x27;&#x29;&#x7c;&#x7c;&#xa;&#x28;select value from app_configuration where key &#x3d; &#x27;TO_VISTA_RS_URI&#x27;&#x29;as url,&#xa;&#x27;&#x7b;&#x22;xmlInboundMessageId&#x22;&#x3a;&#x22;&#x27;&#x7c;&#x7c;t.inbound_ncpdp_msg_id&#x7c;&#x7c;&#x27;&#x22;,&#x22;division&#x22;&#x3a;&#x22;&#x27;&#x7c;&#x7c;&#xa;&#x28;select substr&#x28;va_station_id,1,3&#x29; from pharmacy where t.pharmacy_id &#x3d; pharmacy_id&#x29;&#x7c;&#x7c;&#x27;&#x22;&#x7d;&#x27; as body,&#xa;&#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;vistaSends&#x3e;&#x3c;&#x2f;vistaSends&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;vistaSends&#x27;&#x29;, 0&#x29;&#x29; &#x2b; 1 as runCount,&#xa;nvl&#x28;&#x28;select value from app_configuration where key &#x3d; &#x27;VISTA_RETRY&#x27;&#x29;,0&#x29; as retry,&#xa;t.inbound_ncpdp_msg_id inbound_ncpdp_msg_id,&#xa;t.message_from provider_npi,&#xa;&#x28;select ncpdp_id from pharmacy where t.pharmacy_id &#x3d; pharmacy_id&#x29; as pharmacy_ncpdpid,&#xa;t.message_id as message_id,&#xa;t.pharmacy_id as pharmacy_id,&#xa;t.message_type as message_type,&#xa;&#x27;UNK&#x27; as message,&#xa;&#x27;UNK&#x27; as message_id_new_1,&#xa;&#x27;UNK&#x27; as message_sent_datetime,&#xa;&#x27;UNK&#x27; as error_code,&#xa;&#x27;UNK&#x27; as error_desc,&#xa;&#x27;UNK&#x27; as message_id_new2,&#xa;&#x27;&#x27; as success,&#xa;&#x27;&#x27; as vistaMessage,&#xa;&#x27;&#x27; as errorMessage,&#xa;clinic_id,&#xa;&#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;cancelRxDenied&#x3e;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;cancelRxDenied&#x27;&#x29;, null&#x29;&#x29; as cancelRxDenied,&#xa;&#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;relToOutboundNcpdpMsgId&#x27;&#x29;, null&#x29;&#x29; as relToOutboundNcpdpMsgId&#xa;from inbound_ncpdp_msg t, xmltable&#x28;xmlnamespaces&#x28;&#x27;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x27; as &#x22;ns&#x22;&#x29;, &#x27;&#x2f;ns&#x3a;Message&#x27;&#xa;    passing t.message&#xa;    columns&#xa;    clinic_id varchar2&#x28;35&#x29; path &#x27;&#x2f;&#x2f;ns&#x3a;Header&#x2f;ns&#x3a;From&#x27;&#x29; x&#xa;    where t.inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;</sql>
    <limit>1</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>32</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>To Vista Check Failure</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg &#xa;set message_status &#x3d; &#x27;3005&#x27;, message_status_details &#x3d; &#x27;&#x3c;messageStatusDetails&#x3e;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3f;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x3c;cancelRxDenied&#x3e;&#x3f;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x3c;vistaSends&#x3e;&#x3f;&#x3c;&#x2f;vistaSends&#x3e;&#x3c;vistaMessage&#x3e;&#x27;&#x7c;&#x7c;substr&#x28;&#x27;&#x3f;&#x27;,1,1500&#x29;&#x7c;&#x7c;&#x27;&#x3c;&#x2f;vistaMessage&#x3e;&#x3c;hubMessage&#x3e;&#x27;&#x7c;&#x7c;substr&#x28;&#x27;&#x3c;&#x21;&#x5b;CDATA&#x5b; &#x3f; &#x5d;&#x5d;&#x3e;&#x27;,1,1500&#x29;&#x7c;&#x7c;&#x27;&#x3c;&#x2f;hubMessage&#x3e;&#x3c;&#x2f;messageStatusDetails&#x3e;&#x27;&#xa;where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xa;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
       <argument><name>VISTAMESSAGE</name></argument>
       <argument><name>ERRORMESSAGE</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>To Vista Check Failure Allow Retry</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg set message_status &#x3d; &#x27;3004&#x27;, message_status_details &#x3d; &#x27;&#x3c;messageStatusDetails&#x3e;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3f;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x3c;cancelRxDenied&#x3e;&#x3f;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x3c;vistaSends&#x3e;&#x3f;&#x3c;&#x2f;vistaSends&#x3e;&#x3c;&#x2f;messageStatusDetails&#x3e;&#x27;&#xa;where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>160</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>To Vista Check Success</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>local_erx</connection>
    <execute_each_row>Y</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <quoteString>N</quoteString>
    <sql>update inbound_ncpdp_msg &#xa;set message_status &#x3d; &#x27;3002&#x27;, message_status_details &#x3d; &#x27;&#x3c;messageStatusDetails&#x3e;&#x3c;relToOutboundNcpdpMsgId&#x3e;&#x3f;&#x3c;&#x2f;relToOutboundNcpdpMsgId&#x3e;&#x3c;cancelRxDenied&#x3e;&#x3f;&#x3c;&#x2f;cancelRxDenied&#x3e;&#x3c;vistaSends&#x3e;&#x3f;&#x3c;&#x2f;vistaSends&#x3e;&#x3c;vistaMessage&#x3e;&#x27;&#x7c;&#x7c;substr&#x28;&#x27;&#x3f; - &#x3f;&#x27;,1,1500&#x29;&#x7c;&#x7c;&#x27;&#x3c;&#x2f;vistaMessage&#x3e;&#x3c;&#x2f;messageStatusDetails&#x3e;&#x27;&#xa;where inbound_ncpdp_msg_id &#x3d; &#x24;&#x7b;INBOUND_NCPDP_MSG_ID&#x7d;&#x3b;&#xa;&#xa;commit&#x3b;</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
       <argument><name>RELTOOUTBOUNDNCPDPMSGID</name></argument>
       <argument><name>CANCELRXDENIED</name></argument>
       <argument><name>RUNCOUNT</name></argument>
       <argument><name>success</name></argument>
       <argument><name>vistaMessage</name></argument>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>752</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Write to log</name>
    <type>WriteToLog</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <loglevel>log_level_basic</loglevel>
      <displayHeader>Y</displayHeader>
      <limitRows>N</limitRows>
      <limitRowsNumber>0</limitRowsNumber>
      <logmessage/>
    <fields>
      <field>
        <name>errorMessage</name>
        </field>
      <field>
        <name>rest_result</name>
        </field>
      <field>
        <name>vistaMessage</name>
        </field>
      <field>
        <name>success</name>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>432</xloc>
      <yloc>144</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Write to log 2</name>
    <type>WriteToLog</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <loglevel>log_level_basic</loglevel>
      <displayHeader>Y</displayHeader>
      <limitRows>N</limitRows>
      <limitRowsNumber>0</limitRowsNumber>
      <logmessage>LOG&#x21;&#x21;&#x21;&#x21;&#x21;</logmessage>
    <fields>
      <field>
        <name>MESSAGE_ID</name>
        </field>
      <field>
        <name>MESSAGE_SENT_DATETIME</name>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1056</xloc>
      <yloc>800</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>check for retry</name>
    <type>FilterRows</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>To Vista Check Failure</send_true_to>
<send_false_to>To Vista Check Failure Allow Retry</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>RUNCOUNT</leftvalue>
 <function>&#x3e;&#x3d;</function>
 <rightvalue>RETRY</rightvalue>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>368</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>check for success</name>
    <type>FilterRows</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>To Vista Check Success</send_true_to>
<send_false_to>remove special chars from errorMessage</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>success</leftvalue>
   <function>&#x3d;</function>
   <rightvalue/>
   <value><name>constant</name><type>String</type><text>true</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <conditions>
    <condition>
     <negated>N</negated>
     <leftvalue>VISTAMESSAGE</leftvalue>
     <function>&#x3d;</function>
     <rightvalue/>
     <value><name>constant</name><type>String</type><text>This message already exists. Changes must occur via a change request XML message.</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>     </condition>
    <condition>
     <negated>N</negated>
     <operator>AND</operator>
     <leftvalue>RUNCOUNT</leftvalue>
     <function>&#x3e;</function>
     <rightvalue/>
     <value><name>constant</name><type>BigNumber</type><text>1</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>&#x23;.&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x3b;-&#x23;.&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;&#x23;</mask></value>     </condition>
    </conditions>
   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>64</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>remove special chars from errorMessage</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <in_stream_name>ERRORMESSAGE</in_stream_name>
        <out_stream_name/>
        <use_regex>yes</use_regex>
        <replace_string>&#x5c;p&#x7b;Punct&#x7d;</replace_string>
        <replace_by_string/>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>608</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
      <error>
        <source_step>JSON Input 2</source_step>
        <target_step>check for retry</target_step>
        <is_enabled>Y</is_enabled>
        <nr_valuename/>
        <descriptions_valuename/>
        <fields_valuename/>
        <codes_valuename/>
        <max_errors/>
        <max_pct_errors/>
        <min_pct_rows/>
      </error>
      <error>
        <source_step>REST Client</source_step>
        <target_step>check for retry</target_step>
        <is_enabled>Y</is_enabled>
        <nr_valuename/>
        <descriptions_valuename/>
        <fields_valuename/>
        <codes_valuename/>
        <max_errors/>
        <max_pct_errors/>
        <min_pct_rows/>
      </error>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>

</transformation>

</transformations>
<jobs>
<job>
  <name>InboundDeliverToVistaMbM_JOB</name>
    <description/>
    <extended_description/>
    <job_version/>
    <job_status>0</job_status>
  <directory>&#x2f;inbound_vista_delivery</directory>
  <created_user>admin</created_user>
  <created_date>2017&#x2f;03&#x2f;26 23&#x3a;43&#x3a;30.000</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2019&#x2f;10&#x2f;30 10&#x3a;03&#x3a;08.000</modified_date>
    <parameters>
        <parameter>
            <name>INBOUND_NCPDP_MSG_ID</name>
            <default_value/>
            <description/>
        </parameter>
    </parameters>
  <connection>
    <name>local_erx</name>
    <server>&#x24;&#x7b;DB_HOST_NAME&#x7d;</server>
    <type>ORACLE</type>
    <access>Native</access>
    <database>&#x24;&#x7b;DB_NAME&#x7d;</database>
    <port>&#x24;&#x7b;DB_PORT&#x7d;</port>
    <username>&#x24;&#x7b;DB_USERNAME&#x7d;</username>
    <password>&#x24;&#x7b;DB_PASSWORD&#x7d;</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>INITIAL_POOL_SIZE</code><attribute>1</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>MAXIMUM_POOL_SIZE</code><attribute>10</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>&#x24;&#x7b;DB_PORT&#x7d;</attribute></attribute>
      <attribute><code>PRESERVE_RESERVED_WORD_CASE</code><attribute>Y</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_TIMESTAMP_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>Y</attribute></attribute>
    </attributes>
  </connection>
    <slaveservers>
         <slaveserver><name>master1</name><hostname>localhost</hostname><port>8080</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>Y</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave3</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8083</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave5</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8085</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
    </slaveservers>
<job-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_JOB</id><enabled>Y</enabled><name>ID_JOB</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>JOBNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field><field><id>EXECUTING_SERVER</id><enabled>N</enabled><name>EXECUTING_SERVER</name></field><field><id>EXECUTING_USER</id><enabled>N</enabled><name>EXECUTING_USER</name></field><field><id>START_JOB_ENTRY</id><enabled>N</enabled><name>START_JOB_ENTRY</name></field><field><id>CLIENT</id><enabled>N</enabled><name>CLIENT</name></field></job-log-table>
<jobentry-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>JOBENTRYNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>RESULT</id><enabled>Y</enabled><name>RESULT</name></field><field><id>NR_RESULT_ROWS</id><enabled>Y</enabled><name>NR_RESULT_ROWS</name></field><field><id>NR_RESULT_FILES</id><enabled>Y</enabled><name>NR_RESULT_FILES</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field><field><id>COPY_NR</id><enabled>N</enabled><name>COPY_NR</name></field></jobentry-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
   <pass_batchid>N</pass_batchid>
   <shared_objects_file/>
  <entries>
    <entry>
      <name>IBDTV_SendMessageToVistaMbM_TRN</name>
      <description/>
      <type>TRANS</type>
      <specification_method>rep_ref</specification_method>
      <trans_object_id>30</trans_object_id>
      <filename/>
      <transname>IBDTV_SendMessageToVistaMbM_TRN</transname>
      <directory>&#x2f;inbound_vista_delivery</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>Y</params_from_previous>
      <exec_per_row>Y</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Basic</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <logging_remote_work>N</logging_remote_work>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
            <parameter>            <name>INBOUND_NCPDP_MSG_ID</name>
            <stream_name>INBOUND_NCPDP_MSG_ID</stream_name>
            <value/>
            </parameter>            <parameter>            <name>RUNCOUNT</name>
            <stream_name>RUNCOUNT</stream_name>
            <value/>
            </parameter>            <parameter>            <name>RETRY</name>
            <stream_name>RETRY</stream_name>
            <value/>
            </parameter>      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>656</xloc>
      <yloc>160</yloc>
      </entry>
    <entry>
      <name>Check for Messages Deliver to Dedicated MBM</name>
      <description/>
      <type>WAIT_FOR_SQL</type>
      <connection>local_erx</connection>
      <schemaname/>
      <tablename/>
      <success_condition>rows_count_greater</success_condition>
      <rows_count_value>0</rows_count_value>
      <is_custom_sql>Y</is_custom_sql>
      <is_usevars>Y</is_usevars>
      <custom_sql> select &#x2a; from&#x28;  select inbound_ncpdp_msg_id ,&#xa;    &#x27;3003&#x27; as vistaop_delivery_in_process,&#xa;    &#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;vistaSendRetry&#x3e;&#x3c;&#x2f;vistaSendRetry&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;vistaSendRetry&#x27;&#x29;, 0&#x29;&#x29; &#x2b; 1 as runCount,&#xa;nvl&#x28;&#x28;select value from app_configuration where key &#x3d; &#x27;VISTA_RETRY&#x27;&#x29;,0&#x29; as retry&#xa;from inbound_ncpdp_msg &#xa;where &#x28;&#x28;message_status in &#x28;&#x27;3001&#x27;,&#x27;3004&#x27;&#x29;&#xa;and patient_chk_status in &#x28;&#x27;0002&#x27;,&#x27;0003&#x27;,&#x27;0101&#x27;,&#x27;0102&#x27;,&#x27;0103&#x27;,&#x27;0108&#x27;&#x29;&#xa;and provider_chk_status in &#x28;&#x27;2001&#x27;,&#x27;2002&#x27;,&#x27;2003&#x27;&#x29;&#xa;and drug_chk_status in &#x28;&#x27;1001&#x27;,&#x27;1002&#x27;,&#x27;1003&#x27;&#x29;&#xa;and message_type in &#x28;&#x27;NewRx&#x27;&#x29;&#x29;&#xa;or &#x28;message_status in &#x28;&#x27;3001&#x27;,&#x27;3004&#x27;&#x29; and message_type in &#x28;&#x27;Error&#x27;,&#x27;RefillResponse&#x27;,&#x27;CancelRx&#x27;,&#x27;RxChangeResponse&#x27;&#x29;&#x29;&#x29;&#xa;and nvl&#x28;extractvalue&#x28;message, &#x27;&#x2f;&#x2f;Error&#x2f;Description&#x27;,&#x27;xmlns&#x3d;&#x22;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x22;&#x27;&#x29;,&#x27; &#x27;&#x29; not in &#x28;&#x27;ERX630 PRESCRIBER DOES NOT ACCEPT ELECTRONIC VERIFY&#x27;&#x29;&#xa;and pharmacy_id in &#x28;&#x24;&#x7b;DEDICATED_VISTA_DLVRY_JOB_SITE_LIST&#x7d;&#x29;&#xd;&#xa;order by inbound_ncpdp_msg_id&#x29;&#xa;where rownum &#x3c; &#x24;&#x7b;VISTA_DLVRY_JOB_BATCH_SIZE&#x7d;</custom_sql>
      <add_rows_result>Y</add_rows_result>
      <maximum_timeout>0</maximum_timeout>
      <check_cycle_time>&#x24;&#x7b;VISTA_JOB_CHECK_CYCLE_TIME&#x7d;</check_cycle_time>
      <success_on_timeout>N</success_on_timeout>
      <clear_result_rows>N</clear_result_rows>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>352</xloc>
      <yloc>160</yloc>
      </entry>
    <entry>
      <name>Job Finished Success</name>
      <description/>
      <type>SUCCESS</type>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>880</xloc>
      <yloc>160</yloc>
      </entry>
    <entry>
      <name>START</name>
      <description/>
      <type>SPECIAL</type>
      <start>Y</start>
      <dummy>N</dummy>
      <repeat>Y</repeat>
      <schedulerType>0</schedulerType>
      <intervalSeconds>10</intervalSeconds>
      <intervalMinutes>0</intervalMinutes>
      <hour>12</hour>
      <minutes>0</minutes>
      <weekDay>1</weekDay>
      <DayOfMonth>1</DayOfMonth>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>80</xloc>
      <yloc>160</yloc>
      </entry>
  </entries>
  <hops>
    <hop>
      <from>IBDTV_SendMessageToVistaMbM_TRN</from>
      <to>Job Finished Success</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>START</from>
      <to>Check for Messages Deliver to Dedicated MBM</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
    <hop>
      <from>Check for Messages Deliver to Dedicated MBM</from>
      <to>IBDTV_SendMessageToVistaMbM_TRN</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
  </hops>
  <notepads>
  </notepads>

</job>

<job>
  <name>InboundDeliverToVista_JOB</name>
    <description/>
    <extended_description/>
    <job_version/>
    <job_status>0</job_status>
  <directory>&#x2f;inbound_vista_delivery</directory>
  <created_user>admin</created_user>
  <created_date>2017&#x2f;03&#x2f;26 23&#x3a;43&#x3a;30.000</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2019&#x2f;10&#x2f;31 10&#x3a;21&#x3a;10.000</modified_date>
    <parameters>
        <parameter>
            <name>INBOUND_NCPDP_MSG_ID</name>
            <default_value/>
            <description/>
        </parameter>
    </parameters>
  <connection>
    <name>local_erx</name>
    <server>&#x24;&#x7b;DB_HOST_NAME&#x7d;</server>
    <type>ORACLE</type>
    <access>Native</access>
    <database>&#x24;&#x7b;DB_NAME&#x7d;</database>
    <port>&#x24;&#x7b;DB_PORT&#x7d;</port>
    <username>&#x24;&#x7b;DB_USERNAME&#x7d;</username>
    <password>&#x24;&#x7b;DB_PASSWORD&#x7d;</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>INITIAL_POOL_SIZE</code><attribute>1</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>MAXIMUM_POOL_SIZE</code><attribute>10</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>&#x24;&#x7b;DB_PORT&#x7d;</attribute></attribute>
      <attribute><code>PRESERVE_RESERVED_WORD_CASE</code><attribute>Y</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_TIMESTAMP_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>Y</attribute></attribute>
    </attributes>
  </connection>
    <slaveservers>
         <slaveserver><name>master1</name><hostname>localhost</hostname><port>8080</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>Y</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave3</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8083</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
         <slaveserver><name>slave5</name><hostname>vaauserxappsqa2.aac.va.gov</hostname><port>8085</port><webAppName/><username>cluster</username><password>Encrypted 2be98afc86aa7f2e4cb1aa265cd86aac8</password><proxy_hostname/><proxy_port/><non_proxy_hosts/><master>N</master><sslMode>N</sslMode></slaveserver>
    </slaveservers>
<job-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_JOB</id><enabled>Y</enabled><name>ID_JOB</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>JOBNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field><field><id>EXECUTING_SERVER</id><enabled>N</enabled><name>EXECUTING_SERVER</name></field><field><id>EXECUTING_USER</id><enabled>N</enabled><name>EXECUTING_USER</name></field><field><id>START_JOB_ENTRY</id><enabled>N</enabled><name>START_JOB_ENTRY</name></field><field><id>CLIENT</id><enabled>N</enabled><name>CLIENT</name></field></job-log-table>
<jobentry-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>JOBNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>JOBENTRYNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>RESULT</id><enabled>Y</enabled><name>RESULT</name></field><field><id>NR_RESULT_ROWS</id><enabled>Y</enabled><name>NR_RESULT_ROWS</name></field><field><id>NR_RESULT_FILES</id><enabled>Y</enabled><name>NR_RESULT_FILES</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field><field><id>COPY_NR</id><enabled>N</enabled><name>COPY_NR</name></field></jobentry-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
   <pass_batchid>N</pass_batchid>
   <shared_objects_file/>
  <entries>
    <entry>
      <name>Check for Messages to Deliver</name>
      <description/>
      <type>WAIT_FOR_SQL</type>
      <connection>local_erx</connection>
      <schemaname/>
      <tablename/>
      <success_condition>rows_count_greater</success_condition>
      <rows_count_value>0</rows_count_value>
      <is_custom_sql>Y</is_custom_sql>
      <is_usevars>Y</is_usevars>
      <custom_sql> select &#x2a; from&#x28;  select inbound_ncpdp_msg_id ,&#xa;    &#x27;3003&#x27; as vistaop_delivery_in_process,&#xa;    &#x28;nvl&#x28;extractvalue&#x28;xmltype&#x28;nvl&#x28;message_status_details,&#x27;&#x3c;vistaSendRetry&#x3e;&#x3c;&#x2f;vistaSendRetry&#x3e;&#x27;&#x29;&#x29;,&#x27;&#x2f;&#x2f;vistaSendRetry&#x27;&#x29;, 0&#x29;&#x29; &#x2b; 1 as runCount,&#xa;nvl&#x28;&#x28;select value from app_configuration where key &#x3d; &#x27;VISTA_RETRY&#x27;&#x29;,0&#x29; as retry&#xa;from inbound_ncpdp_msg &#xa;where &#x28;&#x28;message_status in &#x28;&#x27;3001&#x27;,&#x27;3004&#x27;&#x29;&#xa;and patient_chk_status in &#x28;&#x27;0002&#x27;,&#x27;0003&#x27;,&#x27;0101&#x27;,&#x27;0102&#x27;,&#x27;0103&#x27;,&#x27;0108&#x27;&#x29;&#xa;and provider_chk_status in &#x28;&#x27;2001&#x27;,&#x27;2002&#x27;,&#x27;2003&#x27;&#x29;&#xa;and drug_chk_status in &#x28;&#x27;1001&#x27;,&#x27;1002&#x27;,&#x27;1003&#x27;&#x29;&#xa;and message_type in &#x28;&#x27;NewRx&#x27;&#x29;&#x29;&#xa;or &#x28;message_status in &#x28;&#x27;3001&#x27;,&#x27;3004&#x27;&#x29; and message_type in &#x28;&#x27;Error&#x27;,&#x27;RefillResponse&#x27;,&#x27;CancelRx&#x27;,&#x27;RxChangeResponse&#x27;&#x29;&#x29;&#x29;&#xa;and nvl&#x28;extractvalue&#x28;message, &#x27;&#x2f;&#x2f;Error&#x2f;Description&#x27;,&#x27;xmlns&#x3d;&#x22;http&#x3a;&#x2f;&#x2f;www.ncpdp.org&#x2f;schema&#x2f;SCRIPT&#x22;&#x27;&#x29;,&#x27; &#x27;&#x29; not in &#x28;&#x27;ERX630 PRESCRIBER DOES NOT ACCEPT ELECTRONIC VERIFY&#x27;&#x29;&#xd;&#xa;and pharmacy_id not in &#x28;&#x24;&#x7b;DEDICATED_VISTA_DLVRY_JOB_SITE_LIST&#x7d;&#x29;&#xd;&#xa;order by inbound_ncpdp_msg_id&#x29;&#xa;where rownum &#x3c; &#x24;&#x7b;VISTA_DLVRY_JOB_BATCH_SIZE&#x7d;</custom_sql>
      <add_rows_result>Y</add_rows_result>
      <maximum_timeout>0</maximum_timeout>
      <check_cycle_time>&#x24;&#x7b;VISTA_JOB_CHECK_CYCLE_TIME&#x7d;</check_cycle_time>
      <success_on_timeout>N</success_on_timeout>
      <clear_result_rows>N</clear_result_rows>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>320</xloc>
      <yloc>192</yloc>
      </entry>
    <entry>
      <name>Job Finished Success</name>
      <description/>
      <type>SUCCESS</type>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>832</xloc>
      <yloc>192</yloc>
      </entry>
    <entry>
      <name>START</name>
      <description/>
      <type>SPECIAL</type>
      <start>Y</start>
      <dummy>N</dummy>
      <repeat>Y</repeat>
      <schedulerType>0</schedulerType>
      <intervalSeconds>10</intervalSeconds>
      <intervalMinutes>0</intervalMinutes>
      <hour>12</hour>
      <minutes>0</minutes>
      <weekDay>1</weekDay>
      <DayOfMonth>1</DayOfMonth>
      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>32</xloc>
      <yloc>192</yloc>
      </entry>
    <entry>
      <name>IBDTV_SendMessageToVista_TRN</name>
      <description/>
      <type>TRANS</type>
      <specification_method>rep_ref</specification_method>
      <trans_object_id>25</trans_object_id>
      <filename/>
      <transname>IBDTV_SendMessageToVista_TRN</transname>
      <directory>&#x2f;inbound_vista_delivery</directory>
      <arg_from_previous>N</arg_from_previous>
      <params_from_previous>Y</params_from_previous>
      <exec_per_row>Y</exec_per_row>
      <clear_rows>N</clear_rows>
      <clear_files>N</clear_files>
      <set_logfile>N</set_logfile>
      <logfile/>
      <logext/>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <loglevel>Basic</loglevel>
      <cluster>N</cluster>
      <slave_server_name/>
      <set_append_logfile>N</set_append_logfile>
      <wait_until_finished>Y</wait_until_finished>
      <follow_abort_remote>N</follow_abort_remote>
      <create_parent_folder>N</create_parent_folder>
      <logging_remote_work>N</logging_remote_work>
      <parameters>        <pass_all_parameters>Y</pass_all_parameters>
            <parameter>            <name>INBOUND_NCPDP_MSG_ID</name>
            <stream_name>INBOUND_NCPDP_MSG_ID</stream_name>
            <value/>
            </parameter>            <parameter>            <name>RUNCOUNT</name>
            <stream_name>RUNCOUNT</stream_name>
            <value/>
            </parameter>            <parameter>            <name>RETRY</name>
            <stream_name>RETRY</stream_name>
            <value/>
            </parameter>      </parameters>      <parallel>N</parallel>
      <draw>Y</draw>
      <nr>0</nr>
      <xloc>624</xloc>
      <yloc>192</yloc>
      </entry>
  </entries>
  <hops>
    <hop>
      <from>START</from>
      <to>Check for Messages to Deliver</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>Y</unconditional>
    </hop>
    <hop>
      <from>Check for Messages to Deliver</from>
      <to>IBDTV_SendMessageToVista_TRN</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
    <hop>
      <from>IBDTV_SendMessageToVista_TRN</from>
      <to>Job Finished Success</to>
      <from_nr>0</from_nr>
      <to_nr>0</to_nr>
      <enabled>Y</enabled>
      <evaluation>Y</evaluation>
      <unconditional>N</unconditional>
    </hop>
  </hops>
  <notepads>
  </notepads>

</job>

</jobs>
</repository>

